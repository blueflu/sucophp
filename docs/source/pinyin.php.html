<!doctype html>

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2.0.5 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Wed, 19 Feb 2014 01:42:36 +0000">

<link rel="stylesheet" type="text/css" href="../stylesheet.css">
<link rel="start" href="../overview-summary.html">

<title>Pinyin.php (SucoPHP API Doc)</title>

</head>
<body id="file" onload="parent.document.title=document.title;">

<div class="header">
<h1>SucoPHP Doc</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../overview-files.html">Files</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../todo-list.html">Todo</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../source\pinyin.php.html" target="_top">No frames</a>
</div>
<hr>

<h1>Pinyin.php</h1>
<hr>

<a name="line1"></a><pre><?php
<a name="line2"></a>/**
<a name="line3"></a> * Suco_Pinyin 中文拼音转换类
<a name="line4"></a> *
<a name="line5"></a> * @version		3.0 2009/09/01
<a name="line6"></a> * @author		Eric Yu (blueflu@live.cn)
<a name="line7"></a> * @copyright	Copyright (c) 2009, Suconet, Inc.
<a name="line8"></a> * @package		Pinyin
<a name="line9"></a> * @license		http://www.suconet.com/license
<a name="line10"></a> * -----------------------------------------------------------
<a name="line11"></a> */
<a name="line12"></a>
<a name="line13"></a>class Suco_Pinyin
<a name="line14"></a>{
<a name="line15"></a>	protected $_data = array(
<a name="line16"></a>		"a"=>-20319,"ai"=>-20317,"an"=>-20304,"ang"=>-20295,"ao"=>-20292,"ba"=>-20283,"bai"=>-20265,
<a name="line17"></a>		"ban"=>-20257,"bang"=>-20242,"bao"=>-20230,"bei"=>-20051,"ben"=>-20036,"beng"=>-20032,"bi"=>-20026,
<a name="line18"></a>		"bian"=>-20002,"biao"=>-19990,"bie"=>-19986,"bin"=>-19982,"bing"=>-19976,"bo"=>-19805,"bu"=>-19784,
<a name="line19"></a>		"ca"=>-19775,"cai"=>-19774,"can"=>-19763,"cang"=>-19756,"cao"=>-19751,"ce"=>-19746,"ceng"=>-19741,
<a name="line20"></a>		"cha"=>-19739,"chai"=>-19728,"chan"=>-19725,"chang"=>-19715,"chao"=>-19540,"che"=>-19531,"chen"=>-19525,
<a name="line21"></a>		"cheng"=>-19515,"chi"=>-19500,"chong"=>-19484,"chou"=>-19479,"chu"=>-19467,"chuai"=>-19289,"chuan"=>-19288,
<a name="line22"></a>		"chuang"=>-19281,"chui"=>-19275,"chun"=>-19270,"chuo"=>-19263,"ci"=>-19261,"cong"=>-19249,"cou"=>-19243,
<a name="line23"></a>		"cu"=>-19242,"cuan"=>-19238,"cui"=>-19235,"cun"=>-19227,"cuo"=>-19224,"da"=>-19218,"dai"=>-19212,
<a name="line24"></a>		"dan"=>-19038,"dang"=>-19023,"dao"=>-19018,"de"=>-19006,"deng"=>-19003,"di"=>-18996,"dian"=>-18977,
<a name="line25"></a>		"diao"=>-18961,"die"=>-18952,"ding"=>-18783,"diu"=>-18774,"dong"=>-18773,"dou"=>-18763,"du"=>-18756,
<a name="line26"></a>		"duan"=>-18741,"dui"=>-18735,"dun"=>-18731,"duo"=>-18722,"e"=>-18710,"en"=>-18697,"er"=>-18696,
<a name="line27"></a>		"fa"=>-18526,"fan"=>-18518,"fang"=>-18501,"fei"=>-18490,"fen"=>-18478,"feng"=>-18463,"fo"=>-18448,
<a name="line28"></a>		"fou"=>-18447,"fu"=>-18446,"ga"=>-18239,"gai"=>-18237,"gan"=>-18231,"gang"=>-18220,"gao"=>-18211,
<a name="line29"></a>		"ge"=>-18201,"gei"=>-18184,"gen"=>-18183,"geng"=>-18181,"gong"=>-18012,"gou"=>-17997,"gu"=>-17988,
<a name="line30"></a>		"gua"=>-17970,"guai"=>-17964,"guan"=>-17961,"guang"=>-17950,"gui"=>-17947,"gun"=>-17931,"guo"=>-17928,
<a name="line31"></a>		"ha"=>-17922,"hai"=>-17759,"han"=>-17752,"hang"=>-17733,"hao"=>-17730,"he"=>-17721,"hei"=>-17703,
<a name="line32"></a>		"hen"=>-17701,"heng"=>-17697,"hong"=>-17692,"hou"=>-17683,"hu"=>-17676,"hua"=>-17496,"huai"=>-17487,
<a name="line33"></a>		"huan"=>-17482,"huang"=>-17468,"hui"=>-17454,"hun"=>-17433,"huo"=>-17427,"ji"=>-17417,"jia"=>-17202,
<a name="line34"></a>		"jian"=>-17185,"jiang"=>-16983,"jiao"=>-16970,"jie"=>-16942,"jin"=>-16915,"jing"=>-16733,"jiong"=>-16708,
<a name="line35"></a>		"jiu"=>-16706,"ju"=>-16689,"juan"=>-16664,"jue"=>-16657,"jun"=>-16647,"ka"=>-16474,"kai"=>-16470,
<a name="line36"></a>		"kan"=>-16465,"kang"=>-16459,"kao"=>-16452,"ke"=>-16448,"ken"=>-16433,"keng"=>-16429,"kong"=>-16427,
<a name="line37"></a>		"kou"=>-16423,"ku"=>-16419,"kua"=>-16412,"kuai"=>-16407,"kuan"=>-16403,"kuang"=>-16401,"kui"=>-16393,
<a name="line38"></a>		"kun"=>-16220,"kuo"=>-16216,"la"=>-16212,"lai"=>-16205,"lan"=>-16202,"lang"=>-16187,"lao"=>-16180,
<a name="line39"></a>		"le"=>-16171,"lei"=>-16169,"leng"=>-16158,"li"=>-16155,"lia"=>-15959,"lian"=>-15958,"liang"=>-15944,
<a name="line40"></a>		"liao"=>-15933,"lie"=>-15920,"lin"=>-15915,"ling"=>-15903,"liu"=>-15889,"long"=>-15878,"lou"=>-15707,
<a name="line41"></a>		"lu"=>-15701,"lv"=>-15681,"luan"=>-15667,"lue"=>-15661,"lun"=>-15659,"luo"=>-15652,"ma"=>-15640,
<a name="line42"></a>		"mai"=>-15631,"man"=>-15625,"mang"=>-15454,"mao"=>-15448,"me"=>-15436,"mei"=>-15435,"men"=>-15419,
<a name="line43"></a>		"meng"=>-15416,"mi"=>-15408,"mian"=>-15394,"miao"=>-15385,"mie"=>-15377,"min"=>-15375,"ming"=>-15369,
<a name="line44"></a>		"miu"=>-15363,"mo"=>-15362,"mou"=>-15183,"mu"=>-15180,"na"=>-15165,"nai"=>-15158,"nan"=>-15153,
<a name="line45"></a>		"nang"=>-15150,"nao"=>-15149,"ne"=>-15144,"nei"=>-15143,"nen"=>-15141,"neng"=>-15140,"ni"=>-15139,
<a name="line46"></a>		"nian"=>-15128,"niang"=>-15121,"niao"=>-15119,"nie"=>-15117,"nin"=>-15110,"ning"=>-15109,"niu"=>-14941,
<a name="line47"></a>		"nong"=>-14937,"nu"=>-14933,"nv"=>-14930,"nuan"=>-14929,"nue"=>-14928,"nuo"=>-14926,"o"=>-14922,
<a name="line48"></a>		"ou"=>-14921,"pa"=>-14914,"pai"=>-14908,"pan"=>-14902,"pang"=>-14894,"pao"=>-14889,"pei"=>-14882,
<a name="line49"></a>		"pen"=>-14873,"peng"=>-14871,"pi"=>-14857,"pian"=>-14678,"piao"=>-14674,"pie"=>-14670,"pin"=>-14668,
<a name="line50"></a>		"ping"=>-14663,"po"=>-14654,"pu"=>-14645,"qi"=>-14630,"qia"=>-14594,"qian"=>-14429,"qiang"=>-14407,
<a name="line51"></a>		"qiao"=>-14399,"qie"=>-14384,"qin"=>-14379,"qing"=>-14368,"qiong"=>-14355,"qiu"=>-14353,"qu"=>-14345,
<a name="line52"></a>		"quan"=>-14170,"que"=>-14159,"qun"=>-14151,"ran"=>-14149,"rang"=>-14145,"rao"=>-14140,"re"=>-14137,
<a name="line53"></a>		"ren"=>-14135,"reng"=>-14125,"ri"=>-14123,"rong"=>-14122,"rou"=>-14112,"ru"=>-14109,"ruan"=>-14099,
<a name="line54"></a>		"rui"=>-14097,"run"=>-14094,"ruo"=>-14092,"sa"=>-14090,"sai"=>-14087,"san"=>-14083,"sang"=>-13917,
<a name="line55"></a>		"sao"=>-13914,"se"=>-13910,"sen"=>-13907,"seng"=>-13906,"sha"=>-13905,"shai"=>-13896,"shan"=>-13894,
<a name="line56"></a>		"shang"=>-13878,"shao"=>-13870,"she"=>-13859,"shen"=>-13847,"sheng"=>-13831,"shi"=>-13658,"shou"=>-13611,
<a name="line57"></a>		"shu"=>-13601,"shua"=>-13406,"shuai"=>-13404,"shuan"=>-13400,"shuang"=>-13398,"shui"=>-13395,"shun"=>-13391,
<a name="line58"></a>		"shuo"=>-13387,"si"=>-13383,"song"=>-13367,"sou"=>-13359,"su"=>-13356,"suan"=>-13343,"sui"=>-13340,
<a name="line59"></a>		"sun"=>-13329,"suo"=>-13326,"ta"=>-13318,"tai"=>-13147,"tan"=>-13138,"tang"=>-13120,"tao"=>-13107,
<a name="line60"></a>		"te"=>-13096,"teng"=>-13095,"ti"=>-13091,"tian"=>-13076,"tiao"=>-13068,"tie"=>-13063,"ting"=>-13060,
<a name="line61"></a>		"tong"=>-12888,"tou"=>-12875,"tu"=>-12871,"tuan"=>-12860,"tui"=>-12858,"tun"=>-12852,"tuo"=>-12849,
<a name="line62"></a>		"wa"=>-12838,"wai"=>-12831,"wan"=>-12829,"wang"=>-12812,"wei"=>-12802,"wen"=>-12607,"weng"=>-12597,
<a name="line63"></a>		"wo"=>-12594,"wu"=>-12585,"xi"=>-12556,"xia"=>-12359,"xian"=>-12346,"xiang"=>-12320,"xiao"=>-12300,
<a name="line64"></a>		"xie"=>-12120,"xin"=>-12099,"xing"=>-12089,"xiong"=>-12074,"xiu"=>-12067,"xu"=>-12058,"xuan"=>-12039,
<a name="line65"></a>		"xue"=>-11867,"xun"=>-11861,"ya"=>-11847,"yan"=>-11831,"yang"=>-11798,"yao"=>-11781,"ye"=>-11604,
<a name="line66"></a>		"yi"=>-11589,"yin"=>-11536,"ying"=>-11358,"yo"=>-11340,"yong"=>-11339,"you"=>-11324,"yu"=>-11303,
<a name="line67"></a>		"yuan"=>-11097,"yue"=>-11077,"yun"=>-11067,"za"=>-11055,"zai"=>-11052,"zan"=>-11045,"zang"=>-11041,
<a name="line68"></a>		"zao"=>-11038,"ze"=>-11024,"zei"=>-11020,"zen"=>-11019,"zeng"=>-11018,"zha"=>-11014,"zhai"=>-10838,
<a name="line69"></a>		"zhan"=>-10832,"zhang"=>-10815,"zhao"=>-10800,"zhe"=>-10790,"zhen"=>-10780,"zheng"=>-10764,"zhi"=>-10587,
<a name="line70"></a>		"zhong"=>-10544,"zhou"=>-10533,"zhu"=>-10519,"zhua"=>-10331,"zhuai"=>-10329,"zhuan"=>-10328,"zhuang"=>-10322,
<a name="line71"></a>		"zhui"=>-10315,"zhun"=>-10309,"zhuo"=>-10307,"zi"=>-10296,"zong"=>-10281,"zou"=>-10274,"zu"=>-10270,
<a name="line72"></a>		"zuan"=>-10262,"zui"=>-10260,"zun"=>-10256,"zuo"=>-10254
<a name="line73"></a>	);
<a name="line74"></a>	protected $_res = '';
<a name="line75"></a>
<a name="line76"></a>	public function __construct($string, $charset = 'utf-8')
<a name="line77"></a>	{
<a name="line78"></a>		arsort($this->_data);
<a name="line79"></a>        reset($this->_data);
<a name="line80"></a>		if($charset!= 'gb2312') $string = $this->toUft8($string);
<a name="line81"></a>		for($i=0; $i<strlen($string); $i++) {
<a name="line82"></a>			$p = ord(substr($string, $i, 1));
<a name="line83"></a>			if($p>160) {
<a name="line84"></a>				$q = ord(substr($string, ++$i, 1)); $p = $p*256 + $q - 65536;
<a name="line85"></a>			}
<a name="line86"></a>			$this->_res .= $this->pinyin($p, $this->_data);
<a name="line87"></a>        }
<a name="line88"></a>	}
<a name="line89"></a>
<a name="line90"></a>	public function __toString()
<a name="line91"></a>	{
<a name="line92"></a>        return $this->_res;
<a name="line93"></a>	}
<a name="line94"></a>
<a name="line95"></a>	public function pinyin($num, $data)
<a name="line96"></a>	{
<a name="line97"></a>        if($num>0 && $num<160 ){
<a name="line98"></a>			return chr($num);
<a name="line99"></a>        }elseif($num<-20319 || $num>-10247){
<a name="line100"></a>			return '';
<a name="line101"></a>        }else{
<a name="line102"></a>			foreach($data as $k=>$v){ if($v<=$num) break; }
<a name="line103"></a>			return $k;
<a name="line104"></a>        }
<a name="line105"></a>	}
<a name="line106"></a>
<a name="line107"></a>	public function toUft8($c){
<a name="line108"></a>        $string = '';
<a name="line109"></a>        if($c < 0x80){
<a name="line110"></a>			$string .= $c;
<a name="line111"></a>        }elseif($c < 0x800) {
<a name="line112"></a>			$string .= chr(0xC0 | $c>>6);
<a name="line113"></a>			$string .= chr(0x80 | $c & 0x3F);
<a name="line114"></a>        }elseif($c < 0x10000){
<a name="line115"></a>			$string .= chr(0xE0 | $c>>12);
<a name="line116"></a>			$string .= chr(0x80 | $c>>6 & 0x3F);
<a name="line117"></a>			$string .= chr(0x80 | $c & 0x3F);
<a name="line118"></a>        }elseif($c < 0x200000) {
<a name="line119"></a>			$string .= chr(0xF0 | $c>>18);
<a name="line120"></a>			$string .= chr(0x80 | $c>>12 & 0x3F);
<a name="line121"></a>			$string .= chr(0x80 | $c>>6 & 0x3F);
<a name="line122"></a>			$string .= chr(0x80 | $c & 0x3F);
<a name="line123"></a>        }
<a name="line124"></a>		return iconv('utf-8', 'gb2312', $string);
<a name="line125"></a>	}
<a name="line126"></a>
<a name="line127"></a>}
<a name="line128"></a></pre>
<div class="header">
<h1>SucoPHP Doc</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../overview-files.html">Files</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../todo-list.html">Todo</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../source\pinyin.php.html" target="_top">No frames</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>